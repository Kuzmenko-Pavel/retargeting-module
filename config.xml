<?xml version="1.0"?>
<root id="0">
<!--настройки сервера-->
<server>
    <!--IP сервера. Ссылка на редирект по рекламному предложению содержит в себе адрес сервера, который её создал-->
    <ip>127.0.0.1</ip>
    <lock_file>/tmp/rgadtrackerd.lock</lock_file>
    <pid_file>/tmp/rgadtrackerd.pid</pid_file>
    <user>alex</user>
    <!--путь к файлу сокета-->
    <socket_path>/tmp/rgadtrackerd.sock</socket_path>
    <!--количество ниток-->
    <children>1</children>

    <!--путь к фалу базы данных sqlite или :memory:-->
    <sqlite>
        <!--файл базы-->
        <db>/run/alex/mem.db</db>
        <!--путь к каталогу дампа sqlite базы-->
        <schema>db_dump</schema>
    </sqlite>

    <!--путь к очереди сообщений-->
    <mq_path>guest:guest@localhost//</mq_path>

    <!--Путь к файлу базы данных MaxMind GeoIP City Edition-->
    <geocity_path>/usr/share/GeoIP/GeoLiteCity.dat</geocity_path>

    <cookie id="unique">
        <name>yottos_unique_id</name>
        <domain>.yottos.com.</domain>
        <path>/</path>
    </cookie>

    <cookie id="tracking">
        <name>yottos_tracking_id</name>
        <domain>.yottos.com.</domain>
        <path>/</path>
    </cookie>

    <templates>
        <out>templates/out.html</out>
        <error>templates/error.html</error>
    </templates>
</server>

<!--ретаргетинг-->
<retargeting>
    <!--Redis-сервер с БД о Ретаргетинге-->
    <redis>
            <!--IP-адрес-->
            <host>127.0.0.1</host>
            <!--порт-->
            <port>6380</port>
    </redis>

    <redis>
            <!--IP-адрес-->
            <host>127.0.0.1</host>
            <!--порт-->
            <port>6380</port>
    </redis>

    <!--период жизни(ЧЧ:ММ:СС)-->
    <ttl>06:00:00</ttl>
</retargeting>

<long_term>
    <!--Redis-сервер с БД о Ретаргетинге-->
    <redis>
            <!--IP-адрес-->
            <host>127.0.0.1</host>
            <!--порт-->
            <port>6380</port>
    </redis>
    <redis>
            <!--IP-адрес-->
            <host>127.0.0.1</host>
            <!--порт-->
            <port>6380</port>
    </redis>
    <!--период жизни(ЧЧ:ММ:СС)-->
    <ttl>06:00:00</ttl>
</long_term>

<sphinx>
    <!--host>213.186.121.76</host-->
    <host>srv-2.yottos.com</host>
    <port>9312</port>
    <index>retargeting</index>
    <select>guid</select>

    <!--all from /usr/include/sphinxclient.h-->
    <mode id="0">
        <match>SPH_MATCH_EXTENDED2</match>
        <rank>SPH_RANK_SPH04</rank>
        <sort>SPH_SORT_RELEVANCE</sort>
    </mode>

    <mode id="1">
        <match>SPH_MATCH_EXTENDED</match>
        <rank>SPH_RANK_SPH04</rank>
        <sort>SPH_SORT_RELEVANCE</sort>
    </mode>

    <fields>
        <title>10</title>
        <description>10</description>
        <keywords>15</keywords>
        <phrases>20</phrases>
        <exactly_phrases>25</exactly_phrases>
        <urlparam>50</urlparam>
        <domain>60</domain>
        <urlpatch>70</urlpatch>
        <url>99</url>
    </fields>

</sphinx>

<!--Параметры подключения к базам данных-->
<mongo>
    <!--Параметры подключения к основной базе данных-->
    <main>
        <!--Адрес сервера баз данных-->
        <host>212.113.32.146:27018</host>
        <host>212.113.32.147:27018</host>
        <host>srv-1.yottos.com:27017</host>
        <host>srv-2.yottos.com:27018</host>
        <host>srv-3.yottos.com:27018</host>
        <!--Название базы данных-->
        <db>getmyad_db</db>
        <!--Название группы реплик (если база данных находится в Replica Set)-->
        <!--set></set-->
        <set>vsrv</set>
        <!--Может ли сервис подключаться к slave серверам базам данных.
        Это балансирует нагрузку в режиме только для чтения, но появляется
        вероятность чтения не самых свежих данных (разница от мастера до
        нескольких секунд).-->
        <slave>true</slave>

        <login></login>
        <passwd></passwd>
    </main>
</mongo>

</root>
